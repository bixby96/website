<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Spotify Anal-*YE*-sis &middot; Chad Bixby</title>
        <meta name="description" content="Exploring the sound on each Kanye album">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.48" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="Spotify Anal-*YE*-sis">
<meta property="og:description" content="Exploring the sound on each Kanye album">
<meta property="og:type" content="article">
<meta property="og:url" content="/2018/08/30/spotify/">
        <link rel="stylesheet" href="/dist/styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        
        
        
    </head>
    <body>
        
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-125431650-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Home" href="/">Home</a>
                            </h1>
                        
                        <a class="button-square" href="/index.xml"><i class="fa fa-rss"></i></a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/bixby96">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="LinkedIn" title="LinkedIn" href="https://linkedin.com/in/chadbixby">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:chadbixby15@gmail.com">
                                <i class="fa fa-envelope"></i>
                            </a>
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Posts" href="/post/">Posts</a>
    </li>

    <li class="site-nav-item">
        <a title="Contact" href="/page/contact/">Contact</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="/page/about/">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Spotify Anal-*YE*-sis</h1>
    
        <p class="post-description" itemprop="description">Exploring the sound on each Kanye album</p>
    
    <p class="post-date">
        <span>Published <time datetime="2018-08-30" itemprop="datePublished">Aug 30, 2018</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="https://linkedin.com/in/chadbixby" itemprop="url" rel="author">Chad Bixby</a>
            </span>
        </span>
    </p>
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <script src="/rmarkdown-libs/kePrint/kePrint.js"></script>

<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a><ul>
<li><a href="#load-packages">Load Packages</a></li>
<li><a href="#import-data">Import Data</a></li>
<li><a href="#danceability">Danceability</a></li>
<li><a href="#valence">Valence</a></li>
<li><a href="#other-variables">Other Variables</a></li>
</ul></li>
<li><a href="#clustering">Clustering</a><ul>
<li><a href="#hierarchical-clustering">Hierarchical Clustering</a></li>
<li><a href="#principle-component-analysis">Principle Component Analysis</a></li>
</ul></li>
</ul>
</div>

<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>As the <a href="https://en.wikipedia.org/wiki/Internet_of_things">Internet of Things</a> (IoT) landscape continues to grow, practically everyone and everything, it seems, is compiling data or at least generating statistics for any variable imaginable. And music is no exception. The music streaming service, Spotify, stores an array of features for each song in its library. They record characteristics such as acousticness, danceability, energy and more. With these variables in mind, I conducted some exploratory analysis along with a couple clustering methods on Kanye West’s <em>Spotify</em> discography. The following report utilizes Spotify’s Web API through Charlie Thompson’s <code>spotifyr</code> package which you can check out <a href="http://www.rdocumentation.org/packages/spotifyr">here</a>.</p>
<center>
<a id='N_ojmtFuShtIOBP5ugOPTQ' class='gie-single' href='http://www.gettyimages.com/detail/994892144' target='_blank' style='color:#a7a7a7;text-decoration:none;font-weight:normal !important;border:none;display:inline-block;'>Embed from Getty Images</a>
<script>window.gie=window.gie||function(c){(gie.q=gie.q||[]).push(c)};gie(function(){gie.widgets.load({id:'N_ojmtFuShtIOBP5ugOPTQ',sig:'qWFJbSTJE8IEPUvJSx1oVvC5GR_qojY9INDpB7ctkm0=',w:'594px',h:'395px',items:'994892144',caption: false ,tld:'com',is360: false })});</script>
<script src='//embed-cdn.gettyimages.com/widgets.js' charset='utf-8' async></script>
</center>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory Data Analysis</h2>
<div id="load-packages" class="section level3">
<h3>Load Packages</h3>
<p>The following code and plots make use of these packages:</p>
<pre class="r"><code>library(spotifyr)
library(tidyverse)
library(knitr)
library(kableExtra)
library(ggridges)
library(plotly)
library(scales)
library(ggfortify)
library(ggdendro)
library(dendextend)</code></pre>
</div>
<div id="import-data" class="section level3">
<h3>Import Data</h3>
<p>First let’s import the audio features for Kanye West and take a quick look at the data.</p>
<pre class="r"><code>kanye &lt;- get_artist_audio_features(artist = &quot;kanye west&quot;)</code></pre>
<p>After viewing the data, I noticed a few tracks (rows) are duplicated since some albums contain edited, clean, and/or live versions. Those rows will be removed in addition to some irrelevant columns. Also let’s be sure we don’t have any missing values.</p>
<pre class="r"><code>kanye2 &lt;- kanye %&gt;%
  filter(!(album_name %in% c(&quot;808s &amp; Heartbreak (Softpak)&quot;, &quot;Late Orchestration&quot;, 
                             &quot;The College Dropout (Edited)&quot;, 
                             &quot;Graduation (Alternative Business Partners)&quot;))) %&gt;%
    select(-c(artist_uri, album_uri, album_type, is_collaboration, track_uri,
            track_preview_url, album_release_year, artist_name, album_img, 
            album_release_date, track_open_spotify_url, track_number,
            disc_number, key, mode, key_mode, album_popularity, time_signature))

sum(is.na(kanye2))</code></pre>
<pre><code>## [1] 0</code></pre>
<p>The dataset we will be working with now has 125 rows and 13 columns with no missing observations!</p>
</div>
<div id="danceability" class="section level3">
<h3>Danceability</h3>
<p>Spotify defines danceability as</p>
<blockquote>
<p>“How suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity. A value of 0.0 is least danceable and 1.0 is most danceable.”</p>
</blockquote>
<p>Before determining which album Spotify deems the most danceable, let’s take a look at how danceability is distributed on each album.</p>
<p><img src="/post/spotify_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The dashed vertical line in the middle represents the midpoint on the danceability scale. Also, the smaller tick marks at the bottom of each shape represent one song on an album. Each album appears to be more danceable than not, but let’s weight each song by its duration to get a better picture of each album in its entirety. The following graph outlines the results.</p>
<pre class="r"><code>kanye_dance &lt;- kanye2 %&gt;%
  mutate(total_dance = danceability*duration_ms) %&gt;%
  group_by(album_name) %&gt;%
  summarise(avg_danceability = sum(total_dance)/length(album_name)/10000)</code></pre>
<iframe width="700" height="500" frameborder="0" scrolling="no" src="//plot.ly/~bixby96/5.embed?link=false&amp;logo=false">
</iframe>
<p>Overall, <em>My Beautiful Dark Twisted Fantasy</em> and <em>808s &amp; Heartbreak</em> represent Kanye’s most danceable albums. The following table lists his top 10 most danceable songs.</p>
<pre class="r"><code>kanye_dance_songs &lt;- kanye2 %&gt;%
  arrange(desc(danceability)) %&gt;%
  select(album_name, track_name, danceability)

kable(head(kanye_dance_songs, 10)) %&gt;%
    kable_styling(full_width = F)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
album_name
</th>
<th style="text-align:left;">
track_name
</th>
<th style="text-align:right;">
danceability
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ye
</td>
<td style="text-align:left;">
All Mine
</td>
<td style="text-align:right;">
0.925
</td>
</tr>
<tr>
<td style="text-align:left;">
Late Registration
</td>
<td style="text-align:left;">
Gone
</td>
<td style="text-align:right;">
0.851
</td>
</tr>
<tr>
<td style="text-align:left;">
KIDS SEE GHOSTS
</td>
<td style="text-align:left;">
Kids See Ghosts
</td>
<td style="text-align:right;">
0.841
</td>
</tr>
<tr>
<td style="text-align:left;">
The Life Of Pablo
</td>
<td style="text-align:left;">
Feedback
</td>
<td style="text-align:right;">
0.837
</td>
</tr>
<tr>
<td style="text-align:left;">
The Life Of Pablo
</td>
<td style="text-align:left;">
30 Hours
</td>
<td style="text-align:right;">
0.822
</td>
</tr>
<tr>
<td style="text-align:left;">
808s &amp; Heartbreak
</td>
<td style="text-align:left;">
Paranoid
</td>
<td style="text-align:right;">
0.812
</td>
</tr>
<tr>
<td style="text-align:left;">
808s &amp; Heartbreak
</td>
<td style="text-align:left;">
Heartless
</td>
<td style="text-align:right;">
0.789
</td>
</tr>
<tr>
<td style="text-align:left;">
Yeezus
</td>
<td style="text-align:left;">
Black Skinhead
</td>
<td style="text-align:right;">
0.775
</td>
</tr>
<tr>
<td style="text-align:left;">
The Life Of Pablo
</td>
<td style="text-align:left;">
Facts (Charlie Heat Version)
</td>
<td style="text-align:right;">
0.769
</td>
</tr>
<tr>
<td style="text-align:left;">
KIDS SEE GHOSTS
</td>
<td style="text-align:left;">
4th Dimension
</td>
<td style="text-align:right;">
0.765
</td>
</tr>
</tbody>
</table>
</div>
<div id="valence" class="section level3">
<h3>Valence</h3>
<p>Spotify defines Valence as</p>
<blockquote>
<p>“A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry)”&quot;</p>
</blockquote>
<p>Again, let’s look at the overall distribution for each album, but for valence this time.</p>
<p><img src="/post/spotify_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Perhaps a bit more polarizing than the danceability metric, most albums seem to have their fair share of both positive and negative sounding songs. Now weighting valence by song duration, let’s discover Kanye’s happiest (and saddest) album.</p>
<pre class="r"><code>kanye_val &lt;- kanye2 %&gt;%
  mutate(total_valence = valence*duration_ms) %&gt;%
  group_by(album_name) %&gt;%
  summarise(avg_valence = sum(total_valence/length(album_name)/10000))</code></pre>
<iframe width="800" height="500" frameborder="0" scrolling="no" src="//plot.ly/~bixby96/3.embed?link=false&amp;logo=false">
</iframe>
<p>With a valence score of 14.68, the happiest Kanye release came way back in 2004 with his debut hit <em>The College Dropout</em>. Interestingly, the four albums with the lowest valence score also make up his most recent work. The tracks with the lowest valence scores are shown below.</p>
<pre class="r"><code>kanye_valence_songs &lt;- kanye2 %&gt;%
  select(album_name, track_name, valence) %&gt;%
  arrange(valence)

kable(head(kanye_valence_songs,10)) %&gt;%
    kable_styling(full_width = F)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
album_name
</th>
<th style="text-align:left;">
track_name
</th>
<th style="text-align:right;">
valence
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
The Life Of Pablo
</td>
<td style="text-align:left;">
Frank’s Track
</td>
<td style="text-align:right;">
0.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
Yeezus
</td>
<td style="text-align:left;">
Hold My Liquor
</td>
<td style="text-align:right;">
0.0399
</td>
</tr>
<tr>
<td style="text-align:left;">
ye
</td>
<td style="text-align:left;">
Violent Crimes
</td>
<td style="text-align:right;">
0.0400
</td>
</tr>
<tr>
<td style="text-align:left;">
The Life Of Pablo
</td>
<td style="text-align:left;">
Waves
</td>
<td style="text-align:right;">
0.0565
</td>
</tr>
<tr>
<td style="text-align:left;">
808s &amp; Heartbreak
</td>
<td style="text-align:left;">
Welcome To Heartbreak
</td>
<td style="text-align:right;">
0.0734
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduation
</td>
<td style="text-align:left;">
Can’t Tell Me Nothing
</td>
<td style="text-align:right;">
0.0963
</td>
</tr>
<tr>
<td style="text-align:left;">
My Beautiful Dark Twisted Fantasy
</td>
<td style="text-align:left;">
Monster
</td>
<td style="text-align:right;">
0.0964
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduation
</td>
<td style="text-align:left;">
I Wonder
</td>
<td style="text-align:right;">
0.1060
</td>
</tr>
<tr>
<td style="text-align:left;">
My Beautiful Dark Twisted Fantasy
</td>
<td style="text-align:left;">
Runaway
</td>
<td style="text-align:right;">
0.1090
</td>
</tr>
<tr>
<td style="text-align:left;">
The Life Of Pablo
</td>
<td style="text-align:left;">
Wolves
</td>
<td style="text-align:right;">
0.1180
</td>
</tr>
</tbody>
</table>
</div>
<div id="other-variables" class="section level3">
<h3>Other Variables</h3>
<p>Interested in exploring the rest of the variables? Choose which characteristics to plot and select which albums to compare using the interactive graph below!</p>
<iframe width="800" height="700" frameborder="F" src="https://chadbixby.shinyapps.io/kanye-song-attributes/">
</iframe>
</div>
</div>
<div id="clustering" class="section level2">
<h2>Clustering</h2>
<div id="hierarchical-clustering" class="section level3">
<h3>Hierarchical Clustering</h3>
<p>Now on to some clustering methods. Let’s determine which albums sound the most alike using hierarchical clustering. A tree with a height of 4 and complete linkage is shown below.</p>
<pre class="r"><code>kanye3 &lt;- kanye2 %&gt;%
  select(-c(track_name, track_popularity)) %&gt;%
  group_by(album_name) %&gt;%
  summarise(dance = sum(danceability*duration_ms)/length(album_name),
            energy = sum(energy*duration_ms)/length(album_name),
            loudness = sum(loudness*duration_ms)/length(album_name),
            speechiness = sum(speechiness*duration_ms)/length(album_name),
            acousticness = sum(acousticness*duration_ms)/length(album_name),
            instrumentalness = sum(instrumentalness*duration_ms)/length(album_name),
            liveness = sum(liveness*duration_ms)/length(album_name),
            valence = sum(valence*duration_ms)/length(album_name),
            tempo = sum(tempo*duration_ms)/length(album_name)) %&gt;%
  remove_rownames() %&gt;%
  column_to_rownames(&quot;album_name&quot;)

kanye.hc &lt;- hclust(dist(scale(kanye3)), method = &quot;complete&quot;)
kanye.tree &lt;- dendro_data(kanye.hc, type = &quot;rectangle&quot;)
kanye.hc.4 &lt;- cutree(kanye.hc, k = 4)</code></pre>
<p><img src="/post/spotify_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Kanye’s first three releases belong to one cluster while his last four belong to another. The middle releases, <em>808s &amp; Heartbreak</em> and <em>Twisted Fantasy</em>, are not only his most danceable records but his most unique sounding as well; they each populate their own cluster.</p>
</div>
<div id="principle-component-analysis" class="section level3">
<h3>Principle Component Analysis</h3>
<p>Now let’s use those variables and see if we can discover if his more popular songs score similarly for each variable. Using a PCA to reduce dimensionality and account for correlation we can try to reveal any patterns.</p>
<pre class="r"><code>kanye.pca &lt;- prcomp(kanye2[,3:11], center = T, scale = T)
summary(kanye.pca)</code></pre>
<pre><code>## Importance of components:
##                           PC1    PC2    PC3    PC4    PC5     PC6     PC7
## Standard deviation     1.5958 1.2793 1.0779 0.9988 0.9512 0.84785 0.69853
## Proportion of Variance 0.2829 0.1819 0.1291 0.1108 0.1005 0.07987 0.05422
## Cumulative Proportion  0.2829 0.4648 0.5939 0.7047 0.8053 0.88513 0.93934
##                            PC8     PC9
## Standard deviation     0.62701 0.39085
## Proportion of Variance 0.04368 0.01697
## Cumulative Proportion  0.98303 1.00000</code></pre>
<p>Using two principle components we can describe a little over 46% of the variability in the data (shown in the plot below). To explain at least 90% of the variability, we need to use 7 principle components. The following graph shows the top two principle components with the top quartile of his most popular songs mapped to one color and the rest to another.</p>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~bixby96/1.embed?link=false&amp;logo=false">
</iframe>
<p>The most popular songs don’t appear to belong to any specific area or cluster on the graph, but it does look like <code>Energy</code> and <code>Loudness</code> are correlated. Try graphing them using the interactive plot above!</p>
</div>
</div>

</div>

        <footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
            
                <a href="/tags/music/">music</a>, 
            
                <a href="/tags/r/">R</a>
            
        </p>
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?text=Spotify%20Anal-%2aYE%2a-sis&url=%2f2018%2f08%2f30%2fspotify%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2f08%2f30%2fspotify%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        

        
        
            <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&title=Spotify%20Anal-%2aYE%2a-sis&url=%2f2018%2f08%2f30%2fspotify%2f&summary=Exploring%20the%20sound%20on%20each%20Kanye%20album"
               onclick="window.open(this.href, 'linkedin-share', 'width=554,height=481');return false;">
               <i class="fa fa-linkedin"></i>
               <span class="hidden">LinkedIn</span>
            </a>
        
    </div>
</footer>

        
    <div class="comments">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "chad-bixby" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Home" href="/">Home</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2018 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="/js/jquery-1.11.3.min.js"></script>
        <script src="/js/jquery.fitvids.js"></script>
        
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        
        
        <script src="/js/scripts.js"></script>
    </body>
</html>

